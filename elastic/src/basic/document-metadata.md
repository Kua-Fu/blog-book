# æ–‡æ¡£å…ƒæ•°æ®

ä¸€ä¸ªæ–‡æ¡£ä¸ä»…ä»…åŒ…å«å®ƒçš„æ•°æ® ï¼Œä¹ŸåŒ…å« å…ƒæ•°æ® â€”â€” æœ‰å…³ æ–‡æ¡£çš„ä¿¡æ¯ã€‚ ä¸‰ä¸ªå¿…é¡»çš„å…ƒæ•°æ®å…ƒç´ å¦‚ä¸‹ï¼š

* _index æ–‡æ¡£åœ¨å“ªå­˜æ”¾

* _type æ–‡æ¡£è¡¨ç¤ºçš„å¯¹è±¡ç±»åˆ«, âš ï¸ é«˜ç‰ˆæœ¬ï¼Œæ²¡æœ‰_type

* _id æ–‡æ¡£å”¯ä¸€æ ‡è¯†

## ä¸€ã€_index

ä¸€ä¸ª ç´¢å¼• åº”è¯¥æ˜¯å› å…±åŒçš„ç‰¹æ€§è¢«åˆ†ç»„åˆ°ä¸€èµ·çš„æ–‡æ¡£é›†åˆã€‚ ä¾‹å¦‚ï¼Œä½ å¯èƒ½å­˜å‚¨æ‰€æœ‰çš„äº§å“åœ¨ç´¢å¼• products ä¸­ï¼Œè€Œå­˜å‚¨æ‰€æœ‰é”€å”®çš„äº¤æ˜“åˆ°ç´¢å¼• sales ä¸­ã€‚ è™½ç„¶ä¹Ÿå…è®¸å­˜å‚¨ä¸ç›¸å…³çš„æ•°æ®åˆ°ä¸€ä¸ªç´¢å¼•ä¸­ï¼Œä½†è¿™é€šå¸¸çœ‹ä½œæ˜¯ä¸€ä¸ªåæ¨¡å¼çš„åšæ³•ã€‚

> ğŸ™ **Tip**
>
> å®é™…ä¸Šï¼Œåœ¨ Elasticsearch ä¸­ï¼Œæˆ‘ä»¬çš„æ•°æ®æ˜¯è¢«å­˜å‚¨å’Œç´¢å¼•åœ¨ åˆ†ç‰‡ ä¸­ï¼Œè€Œä¸€ä¸ªç´¢å¼•ä»…ä»…æ˜¯é€»è¾‘ä¸Šçš„å‘½åç©ºé—´ï¼Œ è¿™ä¸ªå‘½åç©ºé—´ç”±ä¸€ä¸ªæˆ–è€…å¤šä¸ªåˆ†ç‰‡ç»„åˆåœ¨ä¸€èµ·ã€‚ ç„¶è€Œï¼Œè¿™æ˜¯ä¸€ä¸ªå†…éƒ¨ç»†èŠ‚ï¼Œæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæ ¹æœ¬ä¸åº”è¯¥å…³å¿ƒåˆ†ç‰‡ï¼Œå¯¹äºåº”ç”¨ç¨‹åºè€Œè¨€ï¼Œåªéœ€çŸ¥é“æ–‡æ¡£ä½äºä¸€ä¸ª ç´¢å¼• å†…ã€‚ Elasticsearch ä¼šå¤„ç†æ‰€æœ‰çš„ç»†èŠ‚ã€‚

æˆ‘ä»¬å°†åœ¨ ç´¢å¼•ç®¡ç† ä»‹ç»å¦‚ä½•è‡ªè¡Œåˆ›å»ºå’Œç®¡ç†ç´¢å¼•ï¼Œä½†ç°åœ¨æˆ‘ä»¬å°†è®© Elasticsearch å¸®æˆ‘ä»¬åˆ›å»ºç´¢å¼•ã€‚ æ‰€æœ‰éœ€è¦æˆ‘ä»¬åšçš„å°±æ˜¯é€‰æ‹©ä¸€ä¸ªç´¢å¼•åï¼Œ

è¿™ä¸ªåå­—å¿…é¡»

* å°å†™ï¼Œ

* ä¸èƒ½ä»¥ä¸‹åˆ’çº¿å¼€å¤´ï¼Œ

* ä¸èƒ½åŒ…å«é€—å·ã€‚

æˆ‘ä»¬ç”¨ website ä½œä¸ºç´¢å¼•åä¸¾ä¾‹ã€‚

```json
PUT YZtest

{
  "error": {
    "root_cause": [
      {
        "type": "invalid_index_name_exception",
        "reason": "Invalid index name [YZtest], must be lowercase",
        "index_uuid": "_na_",
        "index": "YZtest"
      }
    ],
    "type": "invalid_index_name_exception",
    "reason": "Invalid index name [YZtest], must be lowercase",
    "index_uuid": "_na_",
    "index": "YZtest"
  },
  "status": 400
}

```

```json

PUT _yztest


{
  "error": {
    "root_cause": [
      {
        "type": "invalid_index_name_exception",
        "reason": "Invalid index name [_yztest], must not start with '_', '-', or '+'",
        "index_uuid": "_na_",
        "index": "_yztest"
      }
    ],
    "type": "invalid_index_name_exception",
    "reason": "Invalid index name [_yztest], must not start with '_', '-', or '+'",
    "index_uuid": "_na_",
    "index": "_yztest"
  },
  "status": 400
}

```

```json

PUT yz,test

{
  "error": {
    "root_cause": [
      {
        "type": "invalid_index_name_exception",
        "reason": """Invalid index name [yz,test], must not contain the following characters ['\','/','*','?','"','<','>','|',' ',',']""",
        "index_uuid": "_na_",
        "index": "yz,test"
      }
    ],
    "type": "invalid_index_name_exception",
    "reason": """Invalid index name [yz,test], must not contain the following characters ['\','/','*','?','"','<','>','|',' ',',']""",
    "index_uuid": "_na_",
    "index": "yz,test"
  },
  "status": 400
}

```

## äºŒã€_type 

âš ï¸ é«˜ç‰ˆæœ¬ï¼Œæ²¡æœ‰_typeæ¦‚å¿µ

æ•°æ®å¯èƒ½åœ¨ç´¢å¼•ä¸­åªæ˜¯æ¾æ•£çš„ç»„åˆåœ¨ä¸€èµ·ï¼Œä½†æ˜¯é€šå¸¸æ˜ç¡®å®šä¹‰ä¸€äº›æ•°æ®ä¸­çš„å­åˆ†åŒºæ˜¯å¾ˆæœ‰ç”¨çš„ã€‚ ä¾‹å¦‚ï¼Œæ‰€æœ‰çš„äº§å“éƒ½æ”¾åœ¨ä¸€ä¸ªç´¢å¼•ä¸­ï¼Œä½†æ˜¯ä½ æœ‰è®¸å¤šä¸åŒçš„äº§å“ç±»åˆ«ï¼Œæ¯”å¦‚ "electronics" ã€ "kitchen" å’Œ "lawn-care"ã€‚

è¿™äº›æ–‡æ¡£å…±äº«ä¸€ç§ç›¸åŒçš„ï¼ˆæˆ–éå¸¸ç›¸ä¼¼ï¼‰çš„æ¨¡å¼ï¼šä»–ä»¬æœ‰ä¸€ä¸ªæ ‡é¢˜ã€æè¿°ã€äº§å“ä»£ç å’Œä»·æ ¼ã€‚ä»–ä»¬åªæ˜¯æ­£å¥½å±äºâ€œäº§å“â€ä¸‹çš„ä¸€äº›å­ç±»ã€‚

Elasticsearch å…¬å¼€äº†ä¸€ä¸ªç§°ä¸º types ï¼ˆç±»å‹ï¼‰çš„ç‰¹æ€§ï¼Œå®ƒå…è®¸æ‚¨åœ¨ç´¢å¼•ä¸­å¯¹æ•°æ®è¿›è¡Œé€»è¾‘åˆ†åŒºã€‚ä¸åŒ types çš„æ–‡æ¡£å¯èƒ½æœ‰ä¸åŒçš„å­—æ®µï¼Œä½†æœ€å¥½èƒ½å¤Ÿéå¸¸ç›¸ä¼¼ã€‚ æˆ‘ä»¬å°†åœ¨ ç±»å‹å’Œæ˜ å°„ ä¸­æ›´å¤šçš„è®¨è®ºå…³äº types çš„ä¸€äº›åº”ç”¨å’Œé™åˆ¶ã€‚

ä¸€ä¸ª _type å‘½åå¯ä»¥æ˜¯å¤§å†™æˆ–è€…å°å†™ï¼Œä½†æ˜¯ä¸èƒ½ä»¥ä¸‹åˆ’çº¿æˆ–è€…å¥å·å¼€å¤´ï¼Œä¸åº”è¯¥åŒ…å«é€—å·ï¼Œ å¹¶ä¸”é•¿åº¦é™åˆ¶ä¸º256ä¸ªå­—ç¬¦. æˆ‘ä»¬ä½¿ç”¨ blog ä½œä¸ºç±»å‹åä¸¾ä¾‹ã€‚

## ä¸‰ã€_id

ID æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå½“å®ƒå’Œ _index ä»¥åŠ _type ç»„åˆå°±å¯ä»¥å”¯ä¸€ç¡®å®š Elasticsearch ä¸­çš„ä¸€ä¸ªæ–‡æ¡£ã€‚ å½“ä½ åˆ›å»ºä¸€ä¸ªæ–°çš„æ–‡æ¡£ï¼Œè¦ä¹ˆæä¾›è‡ªå·±çš„ _id ï¼Œè¦ä¹ˆè®© Elasticsearch å¸®ä½ ç”Ÿæˆã€‚

## å››ã€å…¶ä»–å…ƒæ•°æ®

è¿˜æœ‰ä¸€äº›å…¶ä»–çš„å…ƒæ•°æ®å…ƒç´ ï¼Œä»–ä»¬åœ¨ ç±»å‹å’Œæ˜ å°„ è¿›è¡Œäº†ä»‹ç»ã€‚é€šè¿‡å‰é¢å·²ç»åˆ—å‡ºçš„å…ƒæ•°æ®å…ƒç´ ï¼Œ æˆ‘ä»¬å·²ç»èƒ½å­˜å‚¨æ–‡æ¡£åˆ° Elasticsearch ä¸­å¹¶é€šè¿‡ ID æ£€ç´¢å®ƒâ€”â€‹æ¢å¥è¯è¯´ï¼Œä½¿ç”¨ Elasticsearch ä½œä¸ºæ–‡æ¡£çš„å­˜å‚¨ä»‹è´¨ã€‚
